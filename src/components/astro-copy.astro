<script>
  class AstroCopy extends HTMLElement {
    constructor() {
      super();
      
      // 元のテキストを取得
      this.originalText = this.textContent.trim();

      // クリックイベントを追加
      this.addEventListener("click", async () => {
        try {
          await navigator.clipboard.writeText(this.originalText);
          console.log("Copied:", this.originalText);
          
          // コピー後に "Copied!" を表示
          this.textContent = "Copied!";
          setTimeout(() => {
            this.textContent = this.originalText; // 元のテキストに戻す
          }, 1000);
        } catch (err) {
          console.error("Failed to copy:", err);
        }
      });
    }
  }

  // ? 有効なカスタム要素名に変更
  customElements.define("astro-copy", AstroCopy);
</script>

<astro-copy>
  <slot />
</astro-copy>

